{
  "id": "file-04",
  "title": "File Modes",
  "category": "File Handling",
  "number": 76,
  "duration": "6 min read",
  "content": "## File Modes in Python\n\nFile modes determine how a file is opened and what operations are permitted. Understanding file modes is essential for proper file handling.\n\n## Basic File Modes\n\n| Mode | Description |\n|------|-------------|\n| `'r'` | Read (default) - File must exist |\n| `'w'` | Write - Creates new or truncates existing |\n| `'a'` | Append - Creates new or appends to existing |\n| `'x'` | Exclusive creation - Fails if file exists |\n\n```python\n# Read mode - file must exist\nfile = open('existing.txt', 'r')\n\n# Write mode - creates or overwrites\nfile = open('output.txt', 'w')\n\n# Append mode - creates or adds to end\nfile = open('log.txt', 'a')\n\n# Exclusive creation - fails if exists\nfile = open('new_file.txt', 'x')\n```\n\n## Binary vs Text Mode\n\n| Mode | Description |\n|------|-------------|\n| `'t'` | Text mode (default) |\n| `'b'` | Binary mode |\n\n```python\n# Text mode (default)\nfile = open('document.txt', 'rt')  # Same as 'r'\n\n# Binary mode\nfile = open('image.png', 'rb')\nfile = open('data.bin', 'wb')\nfile = open('archive.zip', 'ab')\n```\n\n## Combined Read/Write Modes\n\n| Mode | Description |\n|------|-------------|\n| `'r+'` | Read and write - File must exist |\n| `'w+'` | Write and read - Creates or truncates |\n| `'a+'` | Append and read - Creates or appends |\n\n```python\n# Read and write - start at beginning\nfile = open('data.txt', 'r+')\ncontent = file.read()\nfile.write('Additional content')\nfile.close()\n\n# Write and read - truncates first\nfile = open('data.txt', 'w+')\nfile.write('New content')\nfile.seek(0)\ncontent = file.read()\nfile.close()\n\n# Append and read\nfile = open('log.txt', 'a+')\nfile.write('New log entry\\n')\nfile.seek(0)\nall_logs = file.read()\nfile.close()\n```\n\n## Mode Combinations Summary\n\n```python\n# All valid mode combinations\nmodes = {\n    'r':   'Read text, must exist',\n    'rb':  'Read binary, must exist',\n    'r+':  'Read/write text, must exist',\n    'rb+': 'Read/write binary, must exist',\n    'r+b': 'Same as rb+',\n    \n    'w':   'Write text, create/truncate',\n    'wb':  'Write binary, create/truncate',\n    'w+':  'Read/write text, create/truncate',\n    'wb+': 'Read/write binary, create/truncate',\n    \n    'a':   'Append text, create if needed',\n    'ab':  'Append binary, create if needed',\n    'a+':  'Append/read text, create if needed',\n    'ab+': 'Append/read binary, create if needed',\n    \n    'x':   'Exclusive create text',\n    'xb':  'Exclusive create binary',\n    'x+':  'Exclusive create read/write text',\n    'xb+': 'Exclusive create read/write binary',\n}\n```\n\n## Practical Mode Selection\n\n### Reading a Configuration File\n\n```python\n# Use 'r' - file must exist, read-only\nwith open('config.ini', 'r') as f:\n    config = f.read()\n```\n\n### Writing a New Report\n\n```python\n# Use 'w' - create new or overwrite\nwith open('report.txt', 'w') as f:\n    f.write('Report content')\n```\n\n### Adding to a Log File\n\n```python\n# Use 'a' - preserve existing, add new\nwith open('app.log', 'a') as f:\n    f.write('New log entry\\n')\n```\n\n### Creating a File Safely\n\n```python\n# Use 'x' - fail if file already exists\ntry:\n    with open('unique.txt', 'x') as f:\n        f.write('This file is new')\nexcept FileExistsError:\n    print('File already exists!')\n```\n\n### Modifying a File In-Place\n\n```python\n# Use 'r+' - read, modify, write back\nwith open('data.txt', 'r+') as f:\n    content = f.read()\n    f.seek(0)\n    f.write(content.upper())\n    f.truncate()  # Remove any leftover content\n```\n\n## Binary Mode Use Cases\n\n```python\n# Images\nwith open('photo.jpg', 'rb') as f:\n    image_data = f.read()\n\n# Copying files\nwith open('source.pdf', 'rb') as src:\n    with open('copy.pdf', 'wb') as dst:\n        dst.write(src.read())\n\n# Working with bytes\nwith open('data.bin', 'wb') as f:\n    f.write(bytes([0x00, 0x01, 0x02, 0x03]))\n```\n\n## Common Mistakes to Avoid\n\n```python\n# WRONG: Opening non-existent file in read mode\n# file = open('missing.txt', 'r')  # FileNotFoundError\n\n# WRONG: Forgetting 'w' overwrites\n# file = open('important.txt', 'w')  # Data lost!\n\n# WRONG: Binary files in text mode\n# file = open('image.png', 'r')  # Encoding errors\n\n# RIGHT: Check before overwriting\nimport os\nif os.path.exists('important.txt'):\n    file = open('important.txt', 'a')  # Append instead\nelse:\n    file = open('important.txt', 'w')\n```",
  "code": "# File Modes in Python\nimport os\n\n# Setup: Create a test file\nwith open('test.txt', 'w') as f:\n    f.write('Original content\\nLine 2\\nLine 3')\n\n# Example 1: Read mode ('r')\nprint(\"=== Read Mode 'r' ===\")\nwith open('test.txt', 'r') as f:\n    print(f.read())\n\n# Example 2: Write mode ('w') - OVERWRITES!\nprint(\"\\n=== Write Mode 'w' (overwrites) ===\")\nwith open('test.txt', 'w') as f:\n    f.write('New content - old is gone!')\n\nwith open('test.txt', 'r') as f:\n    print(f.read())\n\n# Example 3: Append mode ('a')\nprint(\"\\n=== Append Mode 'a' ===\")\nwith open('test.txt', 'a') as f:\n    f.write('\\nAppended line 1')\n    f.write('\\nAppended line 2')\n\nwith open('test.txt', 'r') as f:\n    print(f.read())\n\n# Example 4: Exclusive creation ('x')\nprint(\"\\n=== Exclusive Mode 'x' ===\")\ntry:\n    with open('test.txt', 'x') as f:\n        f.write('This will fail')\nexcept FileExistsError:\n    print(\"FileExistsError: 'x' mode fails if file exists\")\n\n# Create a truly new file\nwith open('brand_new.txt', 'x') as f:\n    f.write('Successfully created!')\nprint(\"Created brand_new.txt successfully\")\n\n# Example 5: Read and Write ('r+')\nprint(\"\\n=== Read/Write Mode 'r+' ===\")\nwith open('test.txt', 'r+') as f:\n    original = f.read()\n    print(f\"Original length: {len(original)} chars\")\n    f.seek(0)  # Go back to start\n    f.write('MODIFIED: ')\n    f.seek(0)\n    print(f.read())\n\n# Example 6: Write and Read ('w+')\nprint(\"\\n=== Write/Read Mode 'w+' ===\")\nwith open('test.txt', 'w+') as f:\n    f.write('Fresh start with w+\\nLine 2')\n    f.seek(0)  # Must seek to read\n    print(f.read())\n\n# Example 7: Binary mode\nprint(\"\\n=== Binary Mode 'wb'/'rb' ===\")\nwith open('binary.bin', 'wb') as f:\n    f.write(bytes([72, 101, 108, 108, 111]))  # 'Hello'\n\nwith open('binary.bin', 'rb') as f:\n    data = f.read()\n    print(f\"Binary: {data}\")\n    print(f\"Decoded: {data.decode('utf-8')}\")\n\n# Clean up\nfor f in ['test.txt', 'brand_new.txt', 'binary.bin']:\n    if os.path.exists(f):\n        os.remove(f)\nprint(\"\\nCleaned up temporary files.\")"
}
