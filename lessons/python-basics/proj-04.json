{
  "id": "proj-04",
  "title": "Data Analysis with Pandas",
  "category": "Bonus: Real-World Projects",
  "number": 104,
  "duration": "15 min read",
  "content": "## Project Overview\n\nLearn data analysis fundamentals using pandas, Python's powerful data manipulation library. You'll load, clean, analyze, and visualize real-world datasets.\n\n## Learning Objectives\n\n- Load and inspect datasets with pandas\n- Clean and transform data\n- Perform statistical analysis\n- Create visualizations with matplotlib\n\n## Prerequisites\n\nInstall required libraries:\n\n```bash\npip install pandas matplotlib seaborn\n```\n\n## Step 1: Loading and Inspecting Data\n\nStart by loading data and understanding its structure:\n\n```python\nimport pandas as pd\n\n# Load data from various sources\ndf = pd.read_csv('sales_data.csv')\n# df = pd.read_excel('data.xlsx')\n# df = pd.read_json('data.json')\n\n# Basic inspection\nprint(df.head())          # First 5 rows\nprint(df.tail())          # Last 5 rows\nprint(df.shape)           # (rows, columns)\nprint(df.columns)         # Column names\nprint(df.dtypes)          # Data types\nprint(df.info())          # Summary info\nprint(df.describe())      # Statistical summary\n```\n\n## Step 2: Data Selection and Filtering\n\nLearn to select and filter data:\n\n```python\n# Select columns\nnames = df['name']                    # Single column (Series)\nsubset = df[['name', 'age', 'city']]  # Multiple columns (DataFrame)\n\n# Select rows by position\nfirst_10 = df.iloc[:10]               # First 10 rows\nrow_5 = df.iloc[4]                    # 5th row\n\n# Select rows by label\ndf.loc[0:5, 'name':'city']            # Rows 0-5, columns name to city\n\n# Filter with conditions\nhigh_sales = df[df['sales'] > 1000]\nadults = df[df['age'] >= 18]\nactive_users = df[(df['active'] == True) & (df['verified'] == True)]\n\n# Query method (SQL-like)\nresult = df.query('age > 25 and city == \"New York\"')\n```\n\n## Step 3: Data Cleaning\n\nHandle missing data and fix issues:\n\n```python\n# Check for missing values\nprint(df.isnull().sum())         # Count nulls per column\nprint(df.isnull().any())         # Which columns have nulls\n\n# Handle missing values\ndf_dropped = df.dropna()                          # Drop rows with any null\ndf_filled = df.fillna(0)                          # Fill nulls with 0\ndf['age'] = df['age'].fillna(df['age'].mean())    # Fill with mean\n\n# Remove duplicates\ndf_unique = df.drop_duplicates()\ndf_unique_cols = df.drop_duplicates(subset=['email'])\n\n# Convert data types\ndf['date'] = pd.to_datetime(df['date'])\ndf['price'] = df['price'].astype(float)\ndf['category'] = df['category'].astype('category')\n\n# Fix string data\ndf['name'] = df['name'].str.strip()         # Remove whitespace\ndf['email'] = df['email'].str.lower()       # Lowercase\ndf['code'] = df['code'].str.replace('-', '') # Remove characters\n```\n\n## Step 4: Data Transformation\n\nCreate new columns and reshape data:\n\n```python\n# Create new columns\ndf['total'] = df['quantity'] * df['price']\ndf['year'] = df['date'].dt.year\ndf['month'] = df['date'].dt.month\ndf['day_of_week'] = df['date'].dt.day_name()\n\n# Apply functions\ndf['category'] = df['amount'].apply(lambda x: 'high' if x > 100 else 'low')\n\ndef categorize_age(age):\n    if age < 18:\n        return 'minor'\n    elif age < 65:\n        return 'adult'\n    else:\n        return 'senior'\n\ndf['age_group'] = df['age'].apply(categorize_age)\n\n# Binning/Bucketing\ndf['age_range'] = pd.cut(df['age'], bins=[0, 18, 35, 50, 100],\n                         labels=['0-17', '18-34', '35-49', '50+'])\n```\n\n## Step 5: Grouping and Aggregation\n\nSummarize data by groups:\n\n```python\n# Basic grouping\nsales_by_region = df.groupby('region')['sales'].sum()\nstats_by_category = df.groupby('category')['price'].describe()\n\n# Multiple aggregations\nsummary = df.groupby('department').agg({\n    'sales': ['sum', 'mean', 'count'],\n    'profit': ['sum', 'mean'],\n    'customers': 'nunique'\n})\n\n# Multiple grouping columns\nmonthly_sales = df.groupby(['year', 'month'])['revenue'].sum()\n\n# Pivot tables\npivot = pd.pivot_table(\n    df,\n    values='sales',\n    index='region',\n    columns='category',\n    aggfunc='sum',\n    fill_value=0\n)\n```\n\n## Step 6: Merging and Joining\n\nCombine multiple datasets:\n\n```python\n# Merge (SQL-like join)\ncombined = pd.merge(orders, customers, on='customer_id')\nleft_join = pd.merge(orders, customers, on='customer_id', how='left')\n\n# Concatenate (stack)\nall_data = pd.concat([df_2022, df_2023, df_2024])\nside_by_side = pd.concat([df1, df2], axis=1)\n\n# Join on index\njoined = df1.join(df2, lsuffix='_left', rsuffix='_right')\n```\n\n## Step 7: Data Visualization\n\nCreate visualizations:\n\n```python\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Line plot\ndf.plot(x='date', y='sales', kind='line', title='Sales Over Time')\nplt.savefig('sales_trend.png')\n\n# Bar chart\ndf.groupby('category')['revenue'].sum().plot(kind='bar')\nplt.title('Revenue by Category')\nplt.tight_layout()\nplt.savefig('revenue_by_category.png')\n\n# Histogram\ndf['age'].plot(kind='hist', bins=20, title='Age Distribution')\n\n# Scatter plot\ndf.plot(kind='scatter', x='advertising', y='sales', alpha=0.5)\n\n# Box plot\ndf.boxplot(column='salary', by='department')\n\n# Using seaborn\nsns.heatmap(df.corr(), annot=True, cmap='coolwarm')\nplt.title('Correlation Matrix')\nplt.savefig('correlation.png')\n```\n\n## Step 8: Exporting Results\n\nSave your analysis:\n\n```python\n# Export to various formats\ndf.to_csv('cleaned_data.csv', index=False)\ndf.to_excel('report.xlsx', sheet_name='Sales Data')\ndf.to_json('data.json', orient='records')\n\n# Export summary statistics\nsummary = df.describe()\nsummary.to_csv('statistics.csv')\n\n# Multiple sheets in Excel\nwith pd.ExcelWriter('full_report.xlsx') as writer:\n    df.to_excel(writer, sheet_name='Raw Data')\n    summary.to_excel(writer, sheet_name='Statistics')\n    pivot.to_excel(writer, sheet_name='Pivot Table')\n```\n\n## Challenge Extensions\n\n1. **Time Series Analysis**: Analyze trends, seasonality, and forecasting\n2. **Interactive Dashboard**: Use Plotly or Dash for interactive visualizations\n3. **Automated Reports**: Generate PDF reports with analysis summaries\n4. **Machine Learning Prep**: Prepare data for ML models with feature engineering",
  "code": "# Data Analysis Project - Sales Data Analysis\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom datetime import datetime, timedelta\nimport random\n\n# Generate sample sales data\ndef generate_sample_data(n_rows=1000):\n    \"\"\"Generate sample sales data for analysis.\"\"\"\n    categories = ['Electronics', 'Clothing', 'Food', 'Books', 'Home']\n    regions = ['North', 'South', 'East', 'West']\n    \n    data = {\n        'date': [datetime(2024, 1, 1) + timedelta(days=random.randint(0, 364)) for _ in range(n_rows)],\n        'product_id': [f'P{random.randint(1000, 9999)}' for _ in range(n_rows)],\n        'category': [random.choice(categories) for _ in range(n_rows)],\n        'region': [random.choice(regions) for _ in range(n_rows)],\n        'quantity': [random.randint(1, 20) for _ in range(n_rows)],\n        'unit_price': [round(random.uniform(10, 500), 2) for _ in range(n_rows)],\n        'customer_age': [random.randint(18, 80) for _ in range(n_rows)]\n    }\n    \n    df = pd.DataFrame(data)\n    df['total_sale'] = df['quantity'] * df['unit_price']\n    return df\n\ndef analyze_sales_data(df):\n    \"\"\"Perform comprehensive sales analysis.\"\"\"\n    print(\"=\" * 50)\n    print(\"SALES DATA ANALYSIS REPORT\")\n    print(\"=\" * 50)\n    \n    # Basic Statistics\n    print(\"\\n1. DATASET OVERVIEW\")\n    print(f\"   Total Records: {len(df):,}\")\n    print(f\"   Date Range: {df['date'].min().date()} to {df['date'].max().date()}\")\n    print(f\"   Total Revenue: ${df['total_sale'].sum():,.2f}\")\n    \n    # Sales by Category\n    print(\"\\n2. SALES BY CATEGORY\")\n    category_sales = df.groupby('category')['total_sale'].agg(['sum', 'mean', 'count'])\n    category_sales.columns = ['Total', 'Average', 'Transactions']\n    category_sales = category_sales.sort_values('Total', ascending=False)\n    print(category_sales.to_string())\n    \n    # Sales by Region\n    print(\"\\n3. SALES BY REGION\")\n    region_sales = df.groupby('region')['total_sale'].sum().sort_values(ascending=False)\n    for region, sales in region_sales.items():\n        pct = (sales / region_sales.sum()) * 100\n        print(f\"   {region}: ${sales:,.2f} ({pct:.1f}%)\")\n    \n    # Monthly Trends\n    print(\"\\n4. MONTHLY SALES TREND\")\n    df['month'] = df['date'].dt.to_period('M')\n    monthly = df.groupby('month')['total_sale'].sum()\n    for month, sales in monthly.head(6).items():\n        print(f\"   {month}: ${sales:,.2f}\")\n    \n    # Customer Age Analysis\n    print(\"\\n5. CUSTOMER AGE ANALYSIS\")\n    df['age_group'] = pd.cut(df['customer_age'], \n                             bins=[0, 25, 40, 55, 100],\n                             labels=['18-25', '26-40', '41-55', '55+'])\n    age_analysis = df.groupby('age_group')['total_sale'].mean()\n    for age, avg in age_analysis.items():\n        print(f\"   {age}: ${avg:.2f} avg per transaction\")\n    \n    return category_sales, region_sales, monthly\n\ndef create_visualizations(df, category_sales, region_sales, monthly):\n    \"\"\"Create analysis visualizations.\"\"\"\n    fig, axes = plt.subplots(2, 2, figsize=(12, 10))\n    \n    # 1. Sales by Category (Bar)\n    category_sales['Total'].plot(kind='bar', ax=axes[0, 0], color='steelblue')\n    axes[0, 0].set_title('Total Sales by Category')\n    axes[0, 0].set_ylabel('Revenue ($)')\n    axes[0, 0].tick_params(axis='x', rotation=45)\n    \n    # 2. Sales by Region (Pie)\n    region_sales.plot(kind='pie', ax=axes[0, 1], autopct='%1.1f%%')\n    axes[0, 1].set_title('Sales Distribution by Region')\n    axes[0, 1].set_ylabel('')\n    \n    # 3. Monthly Trend (Line)\n    monthly.plot(kind='line', ax=axes[1, 0], marker='o', color='green')\n    axes[1, 0].set_title('Monthly Sales Trend')\n    axes[1, 0].set_ylabel('Revenue ($)')\n    axes[1, 0].tick_params(axis='x', rotation=45)\n    \n    # 4. Price Distribution (Histogram)\n    df['unit_price'].plot(kind='hist', ax=axes[1, 1], bins=30, color='coral', edgecolor='black')\n    axes[1, 1].set_title('Unit Price Distribution')\n    axes[1, 1].set_xlabel('Price ($)')\n    \n    plt.tight_layout()\n    plt.savefig('sales_analysis.png', dpi=150)\n    print(\"\\nVisualization saved to: sales_analysis.png\")\n\n# Main execution\nif __name__ == \"__main__\":\n    # Generate or load data\n    print(\"Generating sample sales data...\")\n    df = generate_sample_data(1000)\n    \n    # Run analysis\n    category_sales, region_sales, monthly = analyze_sales_data(df)\n    \n    # Create visualizations\n    create_visualizations(df, category_sales, region_sales, monthly)\n    \n    # Export results\n    df.to_csv('sales_data.csv', index=False)\n    print(\"\\nData exported to: sales_data.csv\")\n    print(\"\\nAnalysis complete!\")"
}
