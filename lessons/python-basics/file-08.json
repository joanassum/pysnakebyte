{
  "id": "file-08",
  "title": "Path Operations",
  "category": "File Handling",
  "number": 80,
  "duration": "8 min read",
  "content": "## Path Operations in Python\n\nPython provides two main ways to work with file paths: the `os.path` module (traditional) and the `pathlib` module (modern, object-oriented). Both are useful for file system navigation and manipulation.\n\n## The pathlib Module (Modern Approach)\n\n### Creating Path Objects\n\n```python\nfrom pathlib import Path\n\n# Current directory\ncurrent = Path('.')\n\n# Specific path\nfile_path = Path('/home/user/documents/file.txt')\n\n# Home directory\nhome = Path.home()\n\n# Current working directory\ncwd = Path.cwd()\n```\n\n### Path Components\n\n```python\nfrom pathlib import Path\n\npath = Path('/home/user/documents/report.pdf')\n\nprint(path.name)      # 'report.pdf'\nprint(path.stem)      # 'report'\nprint(path.suffix)    # '.pdf'\nprint(path.parent)    # '/home/user/documents'\nprint(path.parts)     # ('/', 'home', 'user', 'documents', 'report.pdf')\n```\n\n### Building Paths\n\n```python\nfrom pathlib import Path\n\n# Using / operator\nbase = Path('/home/user')\nfull_path = base / 'documents' / 'file.txt'\nprint(full_path)  # /home/user/documents/file.txt\n\n# Joining paths\npath = Path('folder').joinpath('subfolder', 'file.txt')\n```\n\n### Path Checks\n\n```python\nfrom pathlib import Path\n\npath = Path('example.txt')\n\npath.exists()      # Does it exist?\npath.is_file()     # Is it a file?\npath.is_dir()      # Is it a directory?\npath.is_absolute() # Is it an absolute path?\n```\n\n### File Operations with pathlib\n\n```python\nfrom pathlib import Path\n\n# Read file\npath = Path('data.txt')\ncontent = path.read_text()\nbinary = path.read_bytes()\n\n# Write file\npath.write_text('Hello, World!')\npath.write_bytes(b'Binary data')\n\n# Get file info\nstat = path.stat()\nprint(stat.st_size)   # File size in bytes\nprint(stat.st_mtime)  # Modification time\n```\n\n### Directory Operations\n\n```python\nfrom pathlib import Path\n\n# Create directory\nPath('new_folder').mkdir(exist_ok=True)\n\n# Create nested directories\nPath('a/b/c').mkdir(parents=True, exist_ok=True)\n\n# List directory contents\nfor item in Path('.').iterdir():\n    print(item)\n\n# Find files with glob\nfor py_file in Path('.').glob('*.py'):\n    print(py_file)\n\n# Recursive glob\nfor py_file in Path('.').rglob('*.py'):\n    print(py_file)\n```\n\n## The os.path Module (Traditional)\n\n### Path Manipulation\n\n```python\nimport os.path\n\n# Join paths\npath = os.path.join('folder', 'subfolder', 'file.txt')\n\n# Split path\ndirname, filename = os.path.split('/home/user/file.txt')\n\n# Get components\nprint(os.path.basename('/home/user/file.txt'))  # 'file.txt'\nprint(os.path.dirname('/home/user/file.txt'))   # '/home/user'\nprint(os.path.splitext('file.txt'))             # ('file', '.txt')\n```\n\n### Path Checks\n\n```python\nimport os.path\n\nos.path.exists('file.txt')     # Does it exist?\nos.path.isfile('file.txt')     # Is it a file?\nos.path.isdir('folder')        # Is it a directory?\nos.path.isabs('/home/user')    # Is it absolute?\n```\n\n### Path Utilities\n\n```python\nimport os.path\n\n# Get absolute path\nabs_path = os.path.abspath('relative/path')\n\n# Normalize path\nnormalized = os.path.normpath('/home/user/../user/./file.txt')\n# Result: '/home/user/file.txt'\n\n# Expand user home\nexpanded = os.path.expanduser('~/documents')\n\n# Get file size\nsize = os.path.getsize('file.txt')\n```\n\n## The os Module for File Operations\n\n```python\nimport os\n\n# Current working directory\ncwd = os.getcwd()\n\n# Change directory\nos.chdir('/path/to/directory')\n\n# List directory\nfiles = os.listdir('.')\n\n# Create directory\nos.mkdir('new_folder')\nos.makedirs('a/b/c', exist_ok=True)  # Nested\n\n# Remove file/directory\nos.remove('file.txt')\nos.rmdir('empty_folder')\n\n# Rename/move\nos.rename('old.txt', 'new.txt')\n```\n\n## Practical Examples\n\n### Find All Files by Extension\n\n```python\nfrom pathlib import Path\n\ndef find_files(directory, extension):\n    \"\"\"Find all files with given extension\"\"\"\n    path = Path(directory)\n    return list(path.rglob(f'*{extension}'))\n\n# Find all Python files\npython_files = find_files('.', '.py')\nfor f in python_files:\n    print(f)\n```\n\n### Safe File Path Creation\n\n```python\nfrom pathlib import Path\n\ndef ensure_path(file_path):\n    \"\"\"Create parent directories if they don't exist\"\"\"\n    path = Path(file_path)\n    path.parent.mkdir(parents=True, exist_ok=True)\n    return path\n\n# Will create all needed directories\npath = ensure_path('logs/2024/january/app.log')\npath.write_text('Log entry')\n```\n\n### File Backup with Timestamp\n\n```python\nfrom pathlib import Path\nfrom datetime import datetime\n\ndef backup_file(filepath):\n    \"\"\"Create a timestamped backup of a file\"\"\"\n    path = Path(filepath)\n    if not path.exists():\n        return None\n    \n    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')\n    backup_name = f\"{path.stem}_{timestamp}{path.suffix}\"\n    backup_path = path.parent / 'backups' / backup_name\n    \n    backup_path.parent.mkdir(exist_ok=True)\n    backup_path.write_bytes(path.read_bytes())\n    \n    return backup_path\n```\n\n### Directory Tree\n\n```python\nfrom pathlib import Path\n\ndef print_tree(directory, prefix=''):\n    \"\"\"Print directory tree structure\"\"\"\n    path = Path(directory)\n    entries = sorted(path.iterdir())\n    \n    for i, entry in enumerate(entries):\n        is_last = i == len(entries) - 1\n        print(prefix + ('|__ ' if is_last else '|-- ') + entry.name)\n        \n        if entry.is_dir():\n            new_prefix = prefix + ('    ' if is_last else '|   ')\n            print_tree(entry, new_prefix)\n\nprint_tree('.')\n```\n\n### Cross-Platform Path Handling\n\n```python\nfrom pathlib import Path\nimport os\n\n# pathlib automatically handles OS differences\nconfig_path = Path.home() / '.config' / 'myapp' / 'settings.json'\n\n# Or with os.path\nconfig_path = os.path.join(\n    os.path.expanduser('~'),\n    '.config',\n    'myapp',\n    'settings.json'\n)\n```",
  "code": "# Path Operations in Python\nfrom pathlib import Path\nimport os\n\n# Example 1: Creating Path objects\nprint(\"=== Path Objects ===\")\ncurrent = Path('.')\nhome = Path.home()\ncwd = Path.cwd()\n\nprint(f\"Current dir: {current.absolute()}\")\nprint(f\"Home dir: {home}\")\nprint(f\"Working dir: {cwd}\")\n\n# Example 2: Path components\nprint(\"\\n=== Path Components ===\")\npath = Path('/Users/alice/documents/report.pdf')\nprint(f\"Full path: {path}\")\nprint(f\"Name: {path.name}\")\nprint(f\"Stem: {path.stem}\")\nprint(f\"Suffix: {path.suffix}\")\nprint(f\"Parent: {path.parent}\")\nprint(f\"Parts: {path.parts}\")\n\n# Example 3: Building paths with / operator\nprint(\"\\n=== Building Paths ===\")\nbase = Path.cwd()\ndocs = base / 'documents'\nfile = docs / 'notes.txt'\nprint(f\"Base: {base}\")\nprint(f\"Docs: {docs}\")\nprint(f\"File: {file}\")\n\n# Example 4: Path checks\nprint(\"\\n=== Path Checks ===\")\ntest_dir = Path('test_directory')\ntest_file = Path('test_file.txt')\n\n# Create test items\ntest_dir.mkdir(exist_ok=True)\ntest_file.write_text('Hello, World!')\n\nprint(f\"{test_dir} exists: {test_dir.exists()}\")\nprint(f\"{test_dir} is_dir: {test_dir.is_dir()}\")\nprint(f\"{test_file} is_file: {test_file.is_file()}\")\nprint(f\"{test_file} is_absolute: {test_file.is_absolute()}\")\n\n# Example 5: File operations with pathlib\nprint(\"\\n=== File Operations ===\")\ncontent = test_file.read_text()\nprint(f\"Content: {content}\")\n\nstat = test_file.stat()\nprint(f\"Size: {stat.st_size} bytes\")\n\n# Example 6: Directory operations\nprint(\"\\n=== Directory Operations ===\")\n# Create nested structure\n(test_dir / 'level1' / 'level2').mkdir(parents=True, exist_ok=True)\n(test_dir / 'file1.txt').write_text('File 1')\n(test_dir / 'file2.py').write_text('# Python file')\n(test_dir / 'level1' / 'file3.txt').write_text('Nested file')\n\nprint(\"Directory contents:\")\nfor item in test_dir.iterdir():\n    item_type = 'DIR' if item.is_dir() else 'FILE'\n    print(f\"  [{item_type}] {item.name}\")\n\n# Example 7: Glob patterns\nprint(\"\\n=== Glob Patterns ===\")\nprint(\".txt files:\")\nfor txt in test_dir.glob('*.txt'):\n    print(f\"  {txt.name}\")\n\nprint(\"\\nAll .txt files (recursive):\")\nfor txt in test_dir.rglob('*.txt'):\n    print(f\"  {txt}\")\n\n# Example 8: os.path comparison\nprint(\"\\n=== os.path Examples ===\")\nimport os.path\n\npath_str = '/home/user/documents/file.txt'\nprint(f\"basename: {os.path.basename(path_str)}\")\nprint(f\"dirname: {os.path.dirname(path_str)}\")\nprint(f\"splitext: {os.path.splitext(path_str)}\")\nprint(f\"join: {os.path.join('a', 'b', 'c')}\")\n\n# Example 9: Print directory tree\nprint(\"\\n=== Directory Tree ===\")\ndef print_tree(path, prefix=''):\n    path = Path(path)\n    entries = sorted(path.iterdir())\n    for i, entry in enumerate(entries):\n        is_last = i == len(entries) - 1\n        print(prefix + ('|__ ' if is_last else '|-- ') + entry.name)\n        if entry.is_dir():\n            print_tree(entry, prefix + ('    ' if is_last else '|   '))\n\nprint_tree(test_dir)\n\n# Cleanup\nprint(\"\\n=== Cleanup ===\")\nimport shutil\ntest_file.unlink()  # Remove file\nshutil.rmtree(test_dir)  # Remove directory tree\nprint(\"Cleaned up test files and directories.\")"
}
