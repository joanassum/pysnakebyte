{
  "id": "mod-05",
  "title": "Python Packages",
  "category": "Modules & Packages",
  "number": 54,
  "duration": "8 min read",
  "content": "## Python Packages\n\nA **package** is a way to organize related modules into a directory hierarchy. Packages help structure larger projects and avoid module name conflicts.\n\n## Package vs Module\n\n```\nModule: A single .py file\nPackage: A directory containing modules and an __init__.py file\n```\n\n## Basic Package Structure\n\n```\nmypackage/\n    __init__.py\n    module1.py\n    module2.py\n```\n\nThe `__init__.py` file makes the directory a package:\n\n```python\n# mypackage/__init__.py\n\"\"\"My package for doing cool things.\"\"\"\n\n# Can be empty, or contain initialization code\n```\n\n## Creating a Simple Package\n\n```\nmathtools/\n    __init__.py\n    basic.py\n    advanced.py\n```\n\n```python\n# mathtools/__init__.py\n\"\"\"Math tools package.\"\"\"\n__version__ = \"1.0.0\"\n\n# mathtools/basic.py\ndef add(a, b):\n    return a + b\n\ndef subtract(a, b):\n    return a - b\n\n# mathtools/advanced.py\nimport math\n\ndef power(base, exp):\n    return base ** exp\n\ndef sqrt(x):\n    return math.sqrt(x)\n```\n\n## Importing from Packages\n\n```python\n# Import the package\nimport mathtools\nprint(mathtools.__version__)  # 1.0.0\n\n# Import a module from the package\nimport mathtools.basic\nresult = mathtools.basic.add(5, 3)\n\n# Import specific function\nfrom mathtools.basic import add, subtract\nresult = add(10, 5)\n\n# Import module with alias\nfrom mathtools import advanced as adv\nresult = adv.power(2, 10)\n```\n\n## The __init__.py File\n\nControls what happens when the package is imported:\n\n```python\n# mathtools/__init__.py\n\"\"\"Math tools package.\"\"\"\n\n__version__ = \"1.0.0\"\n__all__ = ['basic', 'advanced']\n\n# Import commonly used functions to package level\nfrom .basic import add, subtract\nfrom .advanced import power, sqrt\n\n# Now users can do:\n# from mathtools import add\n# Instead of:\n# from mathtools.basic import add\n```\n\n## Relative Imports\n\nWithin a package, use relative imports:\n\n```python\n# mathtools/advanced.py\nfrom .basic import add        # From same package\nfrom . import basic           # Import sibling module\nfrom .. import other_package  # From parent package\n```\n\n## Subpackages (Nested Packages)\n\nPackages can contain other packages:\n\n```\nmyproject/\n    __init__.py\n    core/\n        __init__.py\n        engine.py\n        utils.py\n    plugins/\n        __init__.py\n        auth.py\n        cache.py\n    tests/\n        __init__.py\n        test_core.py\n```\n\n```python\n# Importing from nested packages\nfrom myproject.core import engine\nfrom myproject.core.utils import helper_function\nfrom myproject.plugins.auth import authenticate\n```\n\n## Real-World Package Example\n\n```\necommerce/\n    __init__.py\n    models/\n        __init__.py\n        product.py\n        user.py\n        order.py\n    services/\n        __init__.py\n        payment.py\n        shipping.py\n    utils/\n        __init__.py\n        validators.py\n        formatters.py\n```\n\n```python\n# ecommerce/models/product.py\nclass Product:\n    def __init__(self, name, price):\n        self.name = name\n        self.price = price\n\n# ecommerce/models/__init__.py\nfrom .product import Product\nfrom .user import User\nfrom .order import Order\n\n# Now users can do:\nfrom ecommerce.models import Product, User, Order\n```\n\n## Namespace Packages (Python 3.3+)\n\nPackages without `__init__.py` (less common):\n\n```python\n# Python 3.3+ supports \"namespace packages\"\n# These allow a package to span multiple directories\n\nmypkg/  # No __init__.py needed!\n    module1.py\n    module2.py\n```\n\n## Package Data Files\n\nInclude non-Python files in packages:\n\n```\nmypackage/\n    __init__.py\n    data/\n        config.json\n        template.html\n    main.py\n```\n\nAccess package data:\n\n```python\nimport importlib.resources\n\n# Python 3.9+\nwith importlib.resources.files('mypackage.data').joinpath('config.json').open() as f:\n    config = json.load(f)\n\n# Or use __file__ (older approach)\nimport os\npackage_dir = os.path.dirname(__file__)\ndata_path = os.path.join(package_dir, 'data', 'config.json')\n```\n\n## Common Package Patterns\n\n### Pattern 1: Expose Main Classes\n\n```python\n# mypackage/__init__.py\nfrom .core import MainClass\nfrom .helpers import helper_func\n\n__all__ = ['MainClass', 'helper_func']\n```\n\n### Pattern 2: Lazy Loading\n\n```python\n# mypackage/__init__.py\ndef get_heavy_module():\n    from . import heavy_module\n    return heavy_module\n```\n\n### Pattern 3: Version Info\n\n```python\n# mypackage/__init__.py\n__version__ = \"2.1.0\"\n__author__ = \"Your Name\"\n```\n\n## Best Practices\n\n```python\n# 1. Keep __init__.py clean\n# Only import what users need frequently\n\n# 2. Use __all__ to define public API\n__all__ = ['PublicClass', 'public_function']\n\n# 3. Avoid circular imports\n# Don't have module A import B and B import A\n\n# 4. Use relative imports within package\nfrom .sibling import function  # Good\nimport mypackage.sibling       # Works but less flexible\n```\n\n## Practice Exercise\n\nUnderstand package structure and imports!",
  "code": "# Understanding Python Packages\n# Simulating package structure concepts\n\n# === Simulating package structure ===\n# In real projects, these would be separate files:\n#\n# mypackage/\n#     __init__.py\n#     utils.py\n#     models.py\n\n# --- Simulated utils module ---\ndef format_name(first, last):\n    return f\"{first.title()} {last.title()}\"\n\ndef validate_email(email):\n    return \"@\" in email and \".\" in email\n\n# --- Simulated models module ---\nclass User:\n    def __init__(self, name, email):\n        self.name = name\n        self.email = email\n    \n    def __repr__(self):\n        return f\"User(name='{self.name}', email='{self.email}')\"\n\nclass Product:\n    def __init__(self, name, price):\n        self.name = name\n        self.price = price\n    \n    def __repr__(self):\n        return f\"Product(name='{self.name}', price={self.price})\"\n\n# --- Simulated __init__.py exports ---\n__version__ = \"1.0.0\"\n__all__ = ['User', 'Product', 'format_name', 'validate_email']\n\n# === Using the \"package\" ===\nprint(f\"Package version: {__version__}\")\n\nprint(\"\\n=== Utils Functions ===\")\nprint(f\"Formatted: {format_name('john', 'DOE')}\")\nprint(f\"Valid email: {validate_email('user@example.com')}\")\nprint(f\"Invalid email: {validate_email('not-an-email')}\")\n\nprint(\"\\n=== Model Classes ===\")\nuser = User(\"Alice\", \"alice@example.com\")\nproduct = Product(\"Laptop\", 999.99)\n\nprint(f\"User: {user}\")\nprint(f\"Product: {product}\")\n\nprint(\"\\n=== Exploring Standard Library Package ===\")\nimport os.path\nprint(f\"os.path functions: {[f for f in dir(os.path) if not f.startswith('_')][:5]}\")\n\nimport json\nprint(f\"json functions: {[f for f in dir(json) if not f.startswith('_')]}\")"
}
