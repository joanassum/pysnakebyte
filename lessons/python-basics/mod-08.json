{
  "id": "mod-08",
  "title": "Virtual Environments",
  "category": "Modules & Packages",
  "number": 57,
  "duration": "8 min read",
  "content": "## Virtual Environments\n\nA **virtual environment** is an isolated Python environment that allows you to install packages for a specific project without affecting other projects or the system Python.\n\n## Why Use Virtual Environments?\n\n```\nWithout virtual environments:\n- Project A needs requests==2.25.0\n- Project B needs requests==2.28.0\n- CONFLICT! Can't have both globally\n\nWith virtual environments:\n- Project A has its own env with requests==2.25.0\n- Project B has its own env with requests==2.28.0\n- No conflict!\n```\n\nBenefits:\n- Isolate project dependencies\n- Avoid version conflicts\n- Keep system Python clean\n- Reproducible environments\n- Easy to share with others\n\n## Creating Virtual Environments\n\nPython's built-in `venv` module:\n\n```bash\n# Create a virtual environment\npython -m venv myenv\n\n# Common naming conventions\npython -m venv venv      # Simple 'venv'\npython -m venv .venv     # Hidden '.venv'\npython -m venv env       # Just 'env'\n```\n\n## Virtual Environment Structure\n\n```\nmyenv/\n    bin/           # Linux/Mac: Scripts and Python\n    Scripts/       # Windows: Scripts and Python\n    lib/           # Installed packages\n    include/       # C header files\n    pyvenv.cfg     # Environment configuration\n```\n\n## Activating Virtual Environments\n\n```bash\n# Linux/Mac\nsource myenv/bin/activate\n\n# Windows (Command Prompt)\nmyenv\\Scripts\\activate.bat\n\n# Windows (PowerShell)\nmyenv\\Scripts\\Activate.ps1\n\n# After activation, your prompt changes:\n(myenv) $ _\n```\n\n## Using an Activated Environment\n\n```bash\n# Check you're in the right environment\n(myenv) $ which python    # Linux/Mac\n(myenv) $ where python     # Windows\n# Shows: /path/to/myenv/bin/python\n\n# Install packages (only in this environment)\n(myenv) $ pip install requests\n(myenv) $ pip install flask pandas numpy\n\n# Check installed packages\n(myenv) $ pip list\n```\n\n## Deactivating Virtual Environments\n\n```bash\n# Simply run:\n(myenv) $ deactivate\n\n# Prompt returns to normal:\n$ _\n```\n\n## Typical Workflow\n\n```bash\n# 1. Create project directory\nmkdir my_project\ncd my_project\n\n# 2. Create virtual environment\npython -m venv venv\n\n# 3. Activate it\nsource venv/bin/activate  # Linux/Mac\n\n# 4. Install dependencies\npip install requests flask\n\n# 5. Save dependencies\npip freeze > requirements.txt\n\n# 6. Work on your project...\n# 7. When done, deactivate\ndeactivate\n```\n\n## Recreating an Environment\n\n```bash\n# On another machine or fresh install:\n\n# 1. Create new virtual environment\npython -m venv venv\n\n# 2. Activate it\nsource venv/bin/activate\n\n# 3. Install from requirements\npip install -r requirements.txt\n\n# Now you have the same packages!\n```\n\n## Multiple Python Versions\n\n```bash\n# Create venv with specific Python version\npython3.10 -m venv venv310\npython3.11 -m venv venv311\n\n# The venv uses the Python that created it\nsource venv310/bin/activate\npython --version  # 3.10.x\n```\n\n## .gitignore and Virtual Environments\n\nDon't commit virtual environments to git:\n\n```gitignore\n# .gitignore\nvenv/\n.venv/\nenv/\n*.pyc\n__pycache__/\n```\n\nInstead, commit `requirements.txt`:\n\n```bash\n# Create requirements file\npip freeze > requirements.txt\n\n# Commit this file\ngit add requirements.txt\ngit commit -m \"Add project dependencies\"\n```\n\n## Alternative: virtualenv Package\n\n```bash\n# Install virtualenv (more features than venv)\npip install virtualenv\n\n# Create environment\nvirtualenv myenv\n\n# Create with specific Python\nvirtualenv -p python3.10 myenv\n\n# Faster recreation with --always-copy\nvirtualenv --always-copy myenv\n```\n\n## Alternative: conda\n\nPopular in data science:\n\n```bash\n# Create conda environment\nconda create -n myenv python=3.10\n\n# Activate\nconda activate myenv\n\n# Install packages\nconda install numpy pandas\npip install other-package  # Can mix with pip\n\n# Deactivate\nconda deactivate\n\n# List environments\nconda env list\n```\n\n## Alternative: Poetry\n\nModern dependency management:\n\n```bash\n# Install poetry\npip install poetry\n\n# Create new project\npoetry new myproject\ncd myproject\n\n# Add dependencies\npoetry add requests\npoetry add pytest --dev\n\n# Install dependencies\npoetry install\n\n# Run in environment\npoetry run python script.py\npoetry shell  # Activate environment\n```\n\n## Best Practices\n\n```bash\n# 1. One virtual environment per project\nproject_a/\n    venv/\n    requirements.txt\n    src/\n\nproject_b/\n    venv/\n    requirements.txt\n    src/\n\n# 2. Use consistent naming\nvenv/       # Most common\n.venv/      # Hidden, also common\n\n# 3. Always include requirements.txt\npip freeze > requirements.txt\n\n# 4. Consider separate dev requirements\npip freeze > requirements.txt          # Production\npip freeze > requirements-dev.txt      # Development\n\n# 5. Upgrade pip in new environments\npython -m pip install --upgrade pip\n```\n\n## Checking Your Environment\n\n```python\n# In Python, verify your environment\nimport sys\n\nprint(f\"Python: {sys.executable}\")\nprint(f\"Version: {sys.version}\")\nprint(f\"Prefix: {sys.prefix}\")\n\n# If in a venv, sys.prefix differs from sys.base_prefix\nif sys.prefix != sys.base_prefix:\n    print(\"Running in a virtual environment!\")\nelse:\n    print(\"Not in a virtual environment\")\n```\n\n## Practice Exercise\n\nUnderstand virtual environment concepts!",
  "code": "# Understanding Virtual Environments\nimport sys\nimport os\n\nprint(\"=== Current Python Environment ===\")\nprint(f\"Python executable: {sys.executable}\")\nprint(f\"Python version: {sys.version.split()[0]}\")\nprint(f\"Prefix: {sys.prefix}\")\n\n# Check if running in a virtual environment\nprint(\"\\n=== Virtual Environment Check ===\")\nin_venv = sys.prefix != sys.base_prefix\nif in_venv:\n    print(\"Running in a virtual environment!\")\n    print(f\"Venv path: {sys.prefix}\")\nelse:\n    print(\"Not in a virtual environment\")\n    print(f\"Base prefix: {sys.base_prefix}\")\n\n# Show where packages are installed\nprint(\"\\n=== Package Locations ===\")\nfor path in sys.path[:5]:\n    if path:\n        print(f\"  {path}\")\n\n# Virtual environment workflow (as reference)\nprint(\"\\n=== Virtual Environment Workflow ===\")\nworkflow = \"\"\"\n1. Create project directory:\n   mkdir my_project && cd my_project\n\n2. Create virtual environment:\n   python -m venv venv\n\n3. Activate (Linux/Mac):\n   source venv/bin/activate\n\n4. Activate (Windows):\n   venv\\\\Scripts\\\\activate\n\n5. Install packages:\n   pip install requests flask\n\n6. Save dependencies:\n   pip freeze > requirements.txt\n\n7. Deactivate when done:\n   deactivate\n\"\"\"\nprint(workflow)\n\n# Show example requirements.txt\nprint(\"=== Example requirements.txt ===\")\nexample_requirements = \"\"\"\nrequests==2.28.2\nflask==2.2.3\nnumpy>=1.21.0\npandas>=1.3.0,<2.0.0\npytest>=7.0.0\n\"\"\"\nprint(example_requirements)"
}
