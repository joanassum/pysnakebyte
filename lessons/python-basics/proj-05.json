{
  "id": "proj-05",
  "title": "Simple Web App with Flask",
  "category": "Bonus: Real-World Projects",
  "number": 105,
  "duration": "15 min read",
  "content": "## Project Overview\n\nBuild a complete web application using Flask, Python's lightweight web framework. You'll create routes, templates, handle forms, and work with a database.\n\n## Learning Objectives\n\n- Set up a Flask application\n- Create routes and handle HTTP methods\n- Use Jinja2 templates for HTML rendering\n- Handle forms and user input\n- Work with SQLite database\n\n## Prerequisites\n\nInstall Flask:\n\n```bash\npip install flask\n```\n\n## Step 1: Hello World App\n\nStart with the simplest Flask application:\n\n```python\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef home():\n    return '<h1>Hello, World!</h1>'\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\nRun with `python app.py` and visit http://localhost:5000\n\n## Step 2: Routes and Dynamic URLs\n\nCreate multiple routes with parameters:\n\n```python\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef home():\n    return '<h1>Welcome to My App</h1>'\n\n@app.route('/about')\ndef about():\n    return '<h1>About Page</h1>'\n\n@app.route('/user/<username>')\ndef user_profile(username):\n    return f'<h1>Profile: {username}</h1>'\n\n@app.route('/post/<int:post_id>')\ndef show_post(post_id):\n    return f'<h1>Post #{post_id}</h1>'\n\n# Multiple methods\n@app.route('/submit', methods=['GET', 'POST'])\ndef submit():\n    if request.method == 'POST':\n        return 'Form submitted!'\n    return 'Submit form here'\n```\n\n## Step 3: Templates with Jinja2\n\nCreate HTML templates for better structure:\n\n```python\nfrom flask import Flask, render_template\n\napp = Flask(__name__)\n\n@app.route('/')\ndef home():\n    return render_template('index.html', title='Home')\n\n@app.route('/users')\ndef users():\n    user_list = ['Alice', 'Bob', 'Charlie']\n    return render_template('users.html', users=user_list)\n```\n\nCreate `templates/base.html`:\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>{{ title }} - My App</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 40px; }\n        nav { background: #333; padding: 10px; }\n        nav a { color: white; margin-right: 15px; text-decoration: none; }\n        .container { margin-top: 20px; }\n    </style>\n</head>\n<body>\n    <nav>\n        <a href=\"/\">Home</a>\n        <a href=\"/users\">Users</a>\n        <a href=\"/tasks\">Tasks</a>\n    </nav>\n    <div class=\"container\">\n        {% block content %}{% endblock %}\n    </div>\n</body>\n</html>\n```\n\nCreate `templates/index.html`:\n\n```html\n{% extends 'base.html' %}\n{% block content %}\n<h1>Welcome to My Flask App</h1>\n<p>This is a simple web application built with Flask.</p>\n{% endblock %}\n```\n\n## Step 4: Handling Forms\n\nProcess form submissions:\n\n```python\nfrom flask import Flask, render_template, request, redirect, url_for, flash\n\napp = Flask(__name__)\napp.secret_key = 'your-secret-key'  # Required for flash messages\n\ntasks = []  # Simple in-memory storage\n\n@app.route('/tasks')\ndef task_list():\n    return render_template('tasks.html', tasks=tasks)\n\n@app.route('/tasks/add', methods=['GET', 'POST'])\ndef add_task():\n    if request.method == 'POST':\n        title = request.form.get('title')\n        if title:\n            tasks.append({'id': len(tasks) + 1, 'title': title, 'done': False})\n            flash('Task added successfully!', 'success')\n            return redirect(url_for('task_list'))\n        flash('Title is required!', 'error')\n    return render_template('add_task.html')\n\n@app.route('/tasks/<int:task_id>/toggle')\ndef toggle_task(task_id):\n    for task in tasks:\n        if task['id'] == task_id:\n            task['done'] = not task['done']\n            break\n    return redirect(url_for('task_list'))\n```\n\nCreate `templates/tasks.html`:\n\n```html\n{% extends 'base.html' %}\n{% block content %}\n<h1>Task List</h1>\n\n{% with messages = get_flashed_messages(with_categories=true) %}\n    {% for category, message in messages %}\n        <div class=\"alert alert-{{ category }}\">{{ message }}</div>\n    {% endfor %}\n{% endwith %}\n\n<a href=\"{{ url_for('add_task') }}\">Add New Task</a>\n\n<ul>\n{% for task in tasks %}\n    <li>\n        <a href=\"{{ url_for('toggle_task', task_id=task.id) }}\">\n            {% if task.done %}[x]{% else %}[ ]{% endif %}\n        </a>\n        {{ task.title }}\n    </li>\n{% else %}\n    <li>No tasks yet!</li>\n{% endfor %}\n</ul>\n{% endblock %}\n```\n\n## Step 5: Database with SQLite\n\nAdd persistent storage:\n\n```python\nimport sqlite3\nfrom flask import Flask, g\n\napp = Flask(__name__)\nDATABASE = 'tasks.db'\n\ndef get_db():\n    \"\"\"Get database connection.\"\"\"\n    if 'db' not in g:\n        g.db = sqlite3.connect(DATABASE)\n        g.db.row_factory = sqlite3.Row\n    return g.db\n\n@app.teardown_appcontext\ndef close_db(exception):\n    \"\"\"Close database connection.\"\"\"\n    db = g.pop('db', None)\n    if db is not None:\n        db.close()\n\ndef init_db():\n    \"\"\"Initialize the database.\"\"\"\n    with app.app_context():\n        db = get_db()\n        db.execute('''\n            CREATE TABLE IF NOT EXISTS tasks (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                title TEXT NOT NULL,\n                done BOOLEAN DEFAULT FALSE,\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n            )\n        ''')\n        db.commit()\n\n@app.route('/tasks')\ndef task_list():\n    db = get_db()\n    tasks = db.execute('SELECT * FROM tasks ORDER BY created_at DESC').fetchall()\n    return render_template('tasks.html', tasks=tasks)\n\n@app.route('/tasks/add', methods=['POST'])\ndef add_task():\n    title = request.form.get('title')\n    if title:\n        db = get_db()\n        db.execute('INSERT INTO tasks (title) VALUES (?)', (title,))\n        db.commit()\n    return redirect(url_for('task_list'))\n```\n\n## Step 6: REST API Endpoints\n\nAdd JSON API endpoints:\n\n```python\nfrom flask import jsonify, request\n\n@app.route('/api/tasks', methods=['GET'])\ndef api_get_tasks():\n    db = get_db()\n    tasks = db.execute('SELECT * FROM tasks').fetchall()\n    return jsonify([dict(task) for task in tasks])\n\n@app.route('/api/tasks', methods=['POST'])\ndef api_create_task():\n    data = request.get_json()\n    if not data or 'title' not in data:\n        return jsonify({'error': 'Title is required'}), 400\n    \n    db = get_db()\n    cursor = db.execute('INSERT INTO tasks (title) VALUES (?)', (data['title'],))\n    db.commit()\n    \n    return jsonify({\n        'id': cursor.lastrowid,\n        'title': data['title'],\n        'done': False\n    }), 201\n\n@app.route('/api/tasks/<int:task_id>', methods=['PUT'])\ndef api_update_task(task_id):\n    data = request.get_json()\n    db = get_db()\n    db.execute('UPDATE tasks SET done = ? WHERE id = ?', \n               (data.get('done', False), task_id))\n    db.commit()\n    return jsonify({'success': True})\n\n@app.route('/api/tasks/<int:task_id>', methods=['DELETE'])\ndef api_delete_task(task_id):\n    db = get_db()\n    db.execute('DELETE FROM tasks WHERE id = ?', (task_id,))\n    db.commit()\n    return '', 204\n```\n\n## Step 7: Error Handling\n\nAdd custom error pages:\n\n```python\n@app.errorhandler(404)\ndef not_found(error):\n    return render_template('404.html'), 404\n\n@app.errorhandler(500)\ndef server_error(error):\n    return render_template('500.html'), 500\n```\n\n## Challenge Extensions\n\n1. **User Authentication**: Add login/logout with Flask-Login\n2. **File Uploads**: Allow users to upload images or files\n3. **Deployment**: Deploy to Heroku, Railway, or Render\n4. **Testing**: Write unit tests with pytest-flask",
  "code": "# Flask Task Manager - Complete Application\nfrom flask import Flask, render_template, request, redirect, url_for, jsonify, flash\nimport sqlite3\nimport os\n\napp = Flask(__name__)\napp.secret_key = 'dev-secret-key-change-in-production'\nDATABASE = 'tasks.db'\n\n# Database helpers\ndef get_db():\n    \"\"\"Get database connection.\"\"\"\n    conn = sqlite3.connect(DATABASE)\n    conn.row_factory = sqlite3.Row\n    return conn\n\ndef init_db():\n    \"\"\"Initialize the database.\"\"\"\n    conn = get_db()\n    conn.execute('''\n        CREATE TABLE IF NOT EXISTS tasks (\n            id INTEGER PRIMARY KEY AUTOINCREMENT,\n            title TEXT NOT NULL,\n            description TEXT,\n            done BOOLEAN DEFAULT 0,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        )\n    ''')\n    conn.commit()\n    conn.close()\n\n# Web Routes\n@app.route('/')\ndef home():\n    \"\"\"Home page with task list.\"\"\"\n    conn = get_db()\n    tasks = conn.execute(\n        'SELECT * FROM tasks ORDER BY done ASC, created_at DESC'\n    ).fetchall()\n    conn.close()\n    return render_template('index.html', tasks=tasks)\n\n@app.route('/add', methods=['POST'])\ndef add_task():\n    \"\"\"Add a new task.\"\"\"\n    title = request.form.get('title', '').strip()\n    description = request.form.get('description', '').strip()\n    \n    if not title:\n        flash('Task title is required!', 'error')\n    else:\n        conn = get_db()\n        conn.execute(\n            'INSERT INTO tasks (title, description) VALUES (?, ?)',\n            (title, description)\n        )\n        conn.commit()\n        conn.close()\n        flash('Task added successfully!', 'success')\n    \n    return redirect(url_for('home'))\n\n@app.route('/toggle/<int:task_id>')\ndef toggle_task(task_id):\n    \"\"\"Toggle task completion status.\"\"\"\n    conn = get_db()\n    conn.execute(\n        'UPDATE tasks SET done = NOT done WHERE id = ?',\n        (task_id,)\n    )\n    conn.commit()\n    conn.close()\n    return redirect(url_for('home'))\n\n@app.route('/delete/<int:task_id>')\ndef delete_task(task_id):\n    \"\"\"Delete a task.\"\"\"\n    conn = get_db()\n    conn.execute('DELETE FROM tasks WHERE id = ?', (task_id,))\n    conn.commit()\n    conn.close()\n    flash('Task deleted!', 'info')\n    return redirect(url_for('home'))\n\n# API Routes\n@app.route('/api/tasks', methods=['GET'])\ndef api_list_tasks():\n    \"\"\"API: Get all tasks.\"\"\"\n    conn = get_db()\n    tasks = conn.execute('SELECT * FROM tasks ORDER BY created_at DESC').fetchall()\n    conn.close()\n    return jsonify([dict(task) for task in tasks])\n\n@app.route('/api/tasks', methods=['POST'])\ndef api_create_task():\n    \"\"\"API: Create a new task.\"\"\"\n    data = request.get_json()\n    if not data or not data.get('title'):\n        return jsonify({'error': 'Title is required'}), 400\n    \n    conn = get_db()\n    cursor = conn.execute(\n        'INSERT INTO tasks (title, description) VALUES (?, ?)',\n        (data['title'], data.get('description', ''))\n    )\n    conn.commit()\n    task_id = cursor.lastrowid\n    conn.close()\n    \n    return jsonify({'id': task_id, 'title': data['title'], 'done': False}), 201\n\n@app.route('/api/tasks/<int:task_id>', methods=['DELETE'])\ndef api_delete_task(task_id):\n    \"\"\"API: Delete a task.\"\"\"\n    conn = get_db()\n    conn.execute('DELETE FROM tasks WHERE id = ?', (task_id,))\n    conn.commit()\n    conn.close()\n    return '', 204\n\n# HTML Template (inline for simplicity)\nTEMPLATE = '''\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Task Manager</title>\n    <style>\n        * { box-sizing: border-box; }\n        body { font-family: -apple-system, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }\n        h1 { color: #333; }\n        .flash { padding: 10px; margin: 10px 0; border-radius: 4px; }\n        .flash.success { background: #d4edda; color: #155724; }\n        .flash.error { background: #f8d7da; color: #721c24; }\n        .flash.info { background: #d1ecf1; color: #0c5460; }\n        form { display: flex; gap: 10px; margin: 20px 0; }\n        input[type=\"text\"] { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }\n        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }\n        button:hover { background: #0056b3; }\n        .tasks { list-style: none; padding: 0; }\n        .task { display: flex; align-items: center; padding: 15px; border: 1px solid #eee; margin: 5px 0; border-radius: 4px; }\n        .task.done { background: #f8f9fa; }\n        .task.done .title { text-decoration: line-through; color: #6c757d; }\n        .task .title { flex: 1; }\n        .task a { margin-left: 10px; text-decoration: none; }\n        .toggle { font-size: 20px; }\n        .delete { color: #dc3545; }\n    </style>\n</head>\n<body>\n    <h1>Task Manager</h1>\n    \n    {% for category, message in get_flashed_messages(with_categories=true) %}\n    <div class=\"flash {{ category }}\">{{ message }}</div>\n    {% endfor %}\n    \n    <form method=\"POST\" action=\"/add\">\n        <input type=\"text\" name=\"title\" placeholder=\"What needs to be done?\" required>\n        <button type=\"submit\">Add Task</button>\n    </form>\n    \n    <ul class=\"tasks\">\n    {% for task in tasks %}\n        <li class=\"task {% if task.done %}done{% endif %}\">\n            <a href=\"/toggle/{{ task.id }}\" class=\"toggle\">{% if task.done %}&#9745;{% else %}&#9744;{% endif %}</a>\n            <span class=\"title\">{{ task.title }}</span>\n            <a href=\"/delete/{{ task.id }}\" class=\"delete\">&#10005;</a>\n        </li>\n    {% else %}\n        <li class=\"task\"><span class=\"title\">No tasks yet. Add one above!</span></li>\n    {% endfor %}\n    </ul>\n    \n    <p style=\"color: #6c757d; font-size: 14px; margin-top: 30px;\">\n        Total: {{ tasks|length }} tasks | \n        Done: {{ tasks|selectattr('done')|list|length }}\n    </p>\n</body>\n</html>\n'''\n\n@app.route('/')\ndef home():\n    \"\"\"Home page with task list.\"\"\"\n    conn = get_db()\n    tasks = conn.execute(\n        'SELECT * FROM tasks ORDER BY done ASC, created_at DESC'\n    ).fetchall()\n    conn.close()\n    from flask import render_template_string\n    return render_template_string(TEMPLATE, tasks=tasks)\n\nif __name__ == '__main__':\n    # Initialize database\n    init_db()\n    print(\"Starting Flask Task Manager...\")\n    print(\"Visit: http://localhost:5000\")\n    app.run(debug=True)"
}
